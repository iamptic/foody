<!doctype html><html><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Foody ‚Äî –ö–≤–∏—Ç–∞–Ω—Ü–∏—è</title>
<link rel="stylesheet" href="/web/style.css"/>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="/config.js"></script>
</head><body>
<div class="container">
  <h2>üéüÔ∏è –ö–≤–∏—Ç–∞–Ω—Ü–∏—è</h2>
  <div id="box" class="card">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
</div>
<script>
const tg=window.Telegram?.WebApp; if(tg){tg.expand();tg.setHeaderColor('#ffffff');tg.setBackgroundColor('#ffffff');}
async function load(){
  const base = window.BACKEND_PUBLIC;
  const id = new URLSearchParams(location.search).get('id');
  const qr = `${base}/api/v1/reservations/${encodeURIComponent(id)}/qr.png`;
  const detailUrl = `${base}/api/v1/reservations/${encodeURIComponent(id)}`;
  const d = await fetch(detailUrl).then(r=>r.json());
  const exp = new Date(d.expires_at);
  document.getElementById('box').innerHTML = `
    <div class="row">
      <div class="col"><div class="small muted">–ö–æ–¥</div><h1 style="letter-spacing:2px">${d.code}</h1>
      <div class="muted">–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –¥–æ: <b>${exp.toLocaleString()}</b></div>
      <div class="muted small">–ü–æ–∫–∞–∂–∏—Ç–µ QR —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏</div></div>
      <div class="col" style="text-align:center"><img src="${qr}" alt="QR" style="max-width:280px;border:1px solid #e5e7eb;border-radius:12px;padding:8px"/></div>
    </div>`;
}
load();
</script>
</body></html>
